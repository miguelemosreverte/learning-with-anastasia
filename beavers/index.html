<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beavers: Nature&#x27;s Master Engineers - Educational Magazine</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Merriweather:wght@300;400;700&family=Source+Sans+Pro:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            overflow-x: hidden;
            max-width: 100%;
        }
        
        body {
            font-family: 'Source Sans Pro', sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            max-width: 100%;
            position: relative;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, #000 0%, #1a1a1a 100%);
            padding: 40px 0;
            text-align: center;
            border-bottom: 4px solid #FFCC00;
        }
        
        .header h1 {
            font-family: 'Oswald', sans-serif;
            font-size: 3rem;
            color: #FFCC00;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .header p {
            color: #fff;
            font-size: 1.2rem;
            margin-top: 10px;
        }

        /* Language Switcher */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 15px;
            z-index: 1000;
            max-width: 200px;
        }
        
        .lang-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            position: relative;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .lang-btn:hover {
            transform: scale(1.1);
            border-color: #FFCC00;
            box-shadow: 0 4px 20px rgba(255, 204, 0, 0.4);
        }
        
        .lang-btn.active {
            border-color: #FFCC00;
            transform: scale(1.05);
        }
        
        .flag-emoji {
            font-size: 28px;
            line-height: 1;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            height: 70vh;
            overflow: hidden;
            width: 100%;
            max-width: 100vw;
        }
        
        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.7));
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .hero-title {
            font-family: 'Oswald', sans-serif;
            font-size: 4rem;
            color: #fff;
            text-transform: uppercase;
            text-align: center;
            text-shadow: 0 4px 20px rgba(0,0,0,0.7);
        }
        
        .hero-subtitle {
            font-family: 'Merriweather', serif;
            font-size: 1.5rem;
            color: #FFCC00;
            margin-top: 20px;
        }

        /* Content Sections */
        .content-section {
            max-width: 1200px;
            width: 100%;
            margin: 60px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
            overflow: hidden;
        }
        
        /* Action Sequence Sections - Indented sub-stories */
        .content-section.action-sequence {
            max-width: 1000px;
            margin: 30px auto;
            background: linear-gradient(90deg, transparent 0%, rgba(255,204,0,0.05) 10%, rgba(255,204,0,0.05) 90%, transparent 100%);
            border-left: 3px solid #FFCC00;
            padding-left: 40px;
            position: relative;
        }
        
        .content-section.action-sequence::before {
            content: '▸';
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #FFCC00;
            font-size: 1.5rem;
        }
        
        .content-section.action-sequence .text-content h2 {
            font-size: 1.8rem;
            color: #666;
        }
        
        .content-section.action-sequence .image-container img {
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(255,204,0,0.2);
        }
        
        .content-section:nth-child(even) {
            direction: rtl;
        }
        
        .content-section:nth-child(even) .text-content {
            direction: ltr;
        }
        
        .text-content {
            padding: 30px;
        }
        
        .text-content h2 {
            font-family: 'Oswald', sans-serif;
            font-size: 2.5rem;
            color: #000;
            margin-bottom: 20px;
            text-transform: uppercase;
        }
        
        .text-content p {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #444;
            margin-bottom: 15px;
        }
        
        .image-container {
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .image-container img {
            width: 100%;
            max-width: 100%;
            height: auto;
            display: block;
            transition: transform 0.3s ease;
        }
        
        .image-container:hover img {
            transform: scale(1.05);
        }

        /* Fun Fact Cards */
        .fun-facts-section {
            background: #000;
            padding: 60px 20px;
            margin-top: 60px;
            margin-bottom: 0;
        }

        .fun-facts-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .fun-facts-section h2 {
            font-family: 'Oswald', sans-serif;
            font-size: 3rem;
            color: #FFCC00;
            text-align: center;
            margin-bottom: 40px;
            text-transform: uppercase;
        }

        .facts-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            max-width: 900px;
            margin: 0 auto;
        }

        .fact-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 4px solid #FFCC00;
            transition: transform 0.3s ease;
            overflow: hidden;
        }

        .fact-card:hover {
            transform: translateY(-5px);
        }

        .fact-card-image {
            width: 100%;
            height: auto;
            display: block;
        }

        .fact-card-content {
            padding: 30px;
        }

        .fact-card h3 {
            font-family: 'Oswald', sans-serif;
            font-size: 1.5rem;
            color: #000;
            margin-bottom: 15px;
        }

        .fact-card p {
            color: #444;
            line-height: 1.6;
        }

        /* Viewer Details Section */
        .viewer-details {
            max-width: 1200px;
            margin: 60px auto;
            padding: 0 20px;
        }

        .viewer-details h2 {
            font-family: 'Oswald', sans-serif;
            font-size: 2.5rem;
            color: #000;
            margin-bottom: 30px;
            text-transform: uppercase;
            text-align: center;
        }

        .details-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            max-width: 900px;
            margin: 0 auto;
        }

        .detail-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .detail-card:hover {
            transform: translateY(-5px);
        }

        .detail-card img {
            width: 100%;
            height: auto;
            display: block;
        }

        .detail-content {
            padding: 20px;
        }

        .detail-content h3 {
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            color: #000;
            margin-bottom: 10px;
        }

        .detail-content p {
            color: #444;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Footer */
        .footer {
            background: #000;
            color: rgb(102, 102, 102);
            text-align: center;
            padding: 40px 20px;
            margin-top: 0;
            border-top: 2px solid rgb(255, 204, 0);
        }

        .footer p {
            font-family: "Source Sans Pro", sans-serif;
            font-size: 16px;
            margin-bottom: 10px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .content-section {
                grid-template-columns: 1fr;
            }
            
            .content-section.action-sequence {
                padding-left: 20px;
                margin: 20px auto;
            }

            .content-section:nth-child(even) {
                direction: ltr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .text-content h2 {
                font-size: 1.8rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Hide elements for language switching - but NOT the buttons themselves */
        [data-lang]:not(.active):not(.lang-btn) {
            display: none;
        }
        /* Main wrapper to prevent overflow */
        .main-wrapper {
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
            position: relative;
        }
    </style>
</head>
<body>
<div class="main-wrapper">
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn active" data-lang="en" title="English">
            <div class="flag-emoji">🇬🇧</div>
        </button>
        <button class="lang-btn" data-lang="es" title="Español">
            <div class="flag-emoji">🇪🇸</div>
        </button>
        <button class="lang-btn" data-lang="ru" title="Русский">
            <div class="flag-emoji">🇷🇺</div>
        </button>
    </div>

    <!-- Header -->
    <header class="header">
        <h1 data-lang="en" class="active">Beavers: Nature&#x27;s Master Engineers</h1>
        <h1 data-lang="es">Castores: Los Maestros Ingenieros de la Naturaleza</h1>
        <h1 data-lang="ru">Бобры: Мастера-инженеры природы</h1>
        <p data-lang="en" class="active">An Educational Journey into Nature&#x27;s Architecture</p>
        <p data-lang="es">Un Viaje Educativo hacia la Arquitectura de la Naturaleza</p>
        <p data-lang="ru">Образовательное путешествие в архитектуру природы</p>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <img src="assets/images/hero-beaver-landscape.jpg" alt="Beavers" class="hero-image">
        <div class="hero-overlay">
            <h2 class="hero-title" data-lang="en" class="active">Beavers</h2>
            <h2 class="hero-title" data-lang="es">Castores</h2>
            <h2 class="hero-title" data-lang="ru">Бобры</h2>
            <p class="hero-subtitle" data-lang="en" class="active">Building Dreams, One Stick at a Time</p>
            <p class="hero-subtitle" data-lang="es">Construyendo Sueños, Una Rama a la Vez</p>
            <p class="hero-subtitle" data-lang="ru">Строим мечты, по одной веточке</p>
        </div>
    </section>

    <!-- Content Sections -->
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-portrait.jpg" 
                 alt="Young beaver with bright eyes, shiny brown fur, and eager expression" 
                 data-alt-en="Young beaver with bright eyes, shiny brown fur, and eager expression"
                 data-alt-es="Joven castor con ojos brillantes, pelaje marrón brillante y expresión ansiosa"
                 data-alt-ru="Молодой бобр с яркими глазами, блестящей коричневой шерстью">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Meet Baby Beaver</h2>
            <h2 data-lang="es">Conoce al Bebé Castor</h2>
            <h2 data-lang="ru">Знакомьтесь с Малышом Бобром</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver is a young beaver with big dreams! He has strong teeth that never stop growing, waterproof fur, and a flat tail that works like a rudder when swimming. Today, he&#x27;s ready to build his very first dam!</p>
            </div>
            <div data-lang="es">
                <p>¡Bebé Castor es un joven castor con grandes sueños! Tiene dientes fuertes que nunca dejan de crecer, pelaje impermeable y una cola plana que funciona como timón al nadar. ¡Hoy, está listo para construir su primera presa!</p>
            </div>
            <div data-lang="ru">
                <p>Малыш Бобр - молодой бобр с большими мечтами! У него крепкие зубы, которые никогда не перестают расти, водонепроницаемый мех и плоский хвост, который работает как руль при плавании. Сегодня он готов построить свою первую плотину!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-surveying.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 1: Finding the Perfect Spot</h2>
            <h2 data-lang="es">Paso 1: Encontrando el Lugar Perfecto</h2>
            <h2 data-lang="ru">Шаг 1: Поиск идеального места</h2>
            <div data-lang="en" class="active">
                <p>First, Baby Beaver must find the perfect spot for his dam. He looks for a narrow part of the river where the water flows steadily but not too fast. The banks should be strong enough to support his construction.</p>
            </div>
            <div data-lang="es">
                <p>Primero, Bebé Castor debe encontrar el lugar perfecto para su presa. Busca una parte estrecha del río donde el agua fluya constantemente pero no demasiado rápido. Las orillas deben ser lo suficientemente fuertes para soportar su construcción.</p>
            </div>
            <div data-lang="ru">
                <p>Сначала Малыш Бобр должен найти идеальное место для своей плотины. Он ищет узкую часть реки, где вода течет равномерно, но не слишком быстро. Берега должны быть достаточно прочными, чтобы поддерживать его сооружение.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-gathering.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 2: Gathering Materials</h2>
            <h2 data-lang="es">Paso 2: Recolectando Materiales</h2>
            <h2 data-lang="ru">Шаг 2: Сбор материалов</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver starts collecting branches, twigs, and logs. He uses his sharp teeth to gnaw through wood - they&#x27;re stronger than iron! He can carry heavy logs by dragging them or floating them down the river.</p>
            </div>
            <div data-lang="es">
                <p>Bebé Castor comienza a recolectar ramas, ramitas y troncos. Usa sus afilados dientes para roer la madera - ¡son más fuertes que el hierro! Puede cargar troncos pesados arrastrándolos o flotándolos río abajo.</p>
            </div>
            <div data-lang="ru">
                <p>Малыш Бобр начинает собирать ветки, прутья и бревна. Он использует свои острые зубы, чтобы прогрызать древесину - они прочнее железа! Он может переносить тяжелые бревна, волоча их или сплавляя по реке.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-first-log.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 3: The Foundation</h2>
            <h2 data-lang="es">Paso 3: La Fundación</h2>
            <h2 data-lang="ru">Шаг 3: Фундамент</h2>
            <div data-lang="en" class="active">
                <p>The most important part! Baby Beaver places the first heavy log across the river bottom. This anchor log must be perfectly positioned - it will hold everything else in place.</p>
            </div>
            <div data-lang="es">
                <p>¡La parte más importante! Bebé Castor coloca el primer tronco pesado en el fondo del río. Este tronco ancla debe estar perfectamente posicionado - mantendrá todo lo demás en su lugar.</p>
            </div>
            <div data-lang="ru">
                <p>Самая важная часть! Малыш Бобр кладет первое тяжелое бревно поперек дна реки. Это якорное бревно должно быть идеально расположено - оно будет удерживать все остальное на месте.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-weaving.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 4: Building the Framework</h2>
            <h2 data-lang="es">Paso 4: Construyendo la Estructura</h2>
            <h2 data-lang="ru">Шаг 4: Строительство каркаса</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver weaves branches between the logs like a basket. He works both above and below water - beavers can hold their breath for 15 minutes! The structure starts taking shape.</p>
            </div>
            <div data-lang="es">
                <p>Bebé Castor entrelaza ramas entre los troncos como una canasta. Trabaja tanto arriba como debajo del agua - ¡los castores pueden contener la respiración durante 15 minutos! La estructura comienza a tomar forma.</p>
            </div>
            <div data-lang="ru">
                <p>Малыш Бобр переплетает ветки между бревнами, как корзину. Он работает и над, и под водой - бобры могут задерживать дыхание на 15 минут! Сооружение начинает обретать форму.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/papa-beaver.jpg" 
                 alt="Older beaver with grey-tinged fur, wise eyes, and sturdy build" 
                 data-alt-en="Older beaver with grey-tinged fur, wise eyes, and sturdy build"
                 data-alt-es="Castor mayor con pelaje grisáceo, ojos sabios y constitución robusta"
                 data-alt-ru="Старший бобр с седоватым мехом, мудрыми глазами и крепким телосложением">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Papa Beaver Arrives</h2>
            <h2 data-lang="es">Papá Castor Llega</h2>
            <h2 data-lang="ru">Папа Бобр Приходит</h2>
            <div data-lang="en" class="active">
                <p>Papa Beaver, with his grey-tinged fur and years of experience, comes to check on Baby Beaver&#x27;s progress. He&#x27;s built dozens of dams and knows all the tricks!</p>
            </div>
            <div data-lang="es">
                <p>Papá Castor, con su pelaje grisáceo y años de experiencia, viene a verificar el progreso de Bebé Castor. ¡Ha construido docenas de presas y conoce todos los trucos!</p>
            </div>
            <div data-lang="ru">
                <p>Папа Бобр, с его седоватым мехом и многолетним опытом, приходит проверить прогресс Малыша Бобра. Он построил десятки плотин и знает все хитрости!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-papa-teamwork.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 5: Teamwork Makes It Stronger</h2>
            <h2 data-lang="es">Paso 5: El Trabajo en Equipo lo Hace Más Fuerte</h2>
            <h2 data-lang="ru">Шаг 5: Командная работа делает сильнее</h2>
            <div data-lang="en" class="active">
                <p>Papa Beaver shows Baby Beaver how two beavers can lift logs that one cannot. Together, they position the biggest logs at the base, making the dam much stronger!</p>
            </div>
            <div data-lang="es">
                <p>Papá Castor le muestra a Bebé Castor cómo dos castores pueden levantar troncos que uno no puede. ¡Juntos, colocan los troncos más grandes en la base, haciendo la presa mucho más fuerte!</p>
            </div>
            <div data-lang="ru">
                <p>Папа Бобр показывает Малышу Бобру, как два бобра могут поднять бревна, которые один не может. Вместе они устанавливают самые большие бревна в основание, делая плотину намного прочнее!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-mudwork.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 6: Sealing with Mud</h2>
            <h2 data-lang="es">Paso 6: Sellando con Barro</h2>
            <h2 data-lang="ru">Шаг 6: Герметизация грязью</h2>
            <div data-lang="en" class="active">
                <p>Now comes the messy part! Baby Beaver scoops mud from the river bottom and packs it between the sticks. The mud acts like cement, sealing gaps so water can&#x27;t rush through.</p>
            </div>
            <div data-lang="es">
                <p>¡Ahora viene la parte sucia! Bebé Castor recoge barro del fondo del río y lo empaca entre los palos. El barro actúa como cemento, sellando los huecos para que el agua no pueda pasar corriendo.</p>
            </div>
            <div data-lang="ru">
                <p>Теперь наступает грязная часть! Малыш Бобр зачерпывает грязь со дна реки и утрамбовывает её между палками. Грязь действует как цемент, запечатывая щели, чтобы вода не могла прорваться.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-stones.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 7: Reinforcing with Stones</h2>
            <h2 data-lang="es">Paso 7: Reforzando con Piedras</h2>
            <h2 data-lang="ru">Шаг 7: Укрепление камнями</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver adds stones to the base for extra strength. Each stone is carefully chosen and placed. The dam is getting taller - water is starting to pool behind it!</p>
            </div>
            <div data-lang="es">
                <p>Bebé Castor agrega piedras a la base para mayor resistencia. Cada piedra es cuidadosamente elegida y colocada. ¡La presa se está haciendo más alta - el agua está comenzando a acumularse detrás de ella!</p>
            </div>
            <div data-lang="ru">
                <p>Малыш Бобр добавляет камни к основанию для дополнительной прочности. Каждый камень тщательно выбирается и размещается. Плотина становится выше - вода начинает скапливаться за ней!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/mama-beaver.jpg" 
                 alt="Female beaver with gentle expression, carrying willow branches" 
                 data-alt-en="Female beaver with gentle expression, carrying willow branches"
                 data-alt-es="Castor hembra con expresión gentil, llevando ramas de sauce"
                 data-alt-ru="Бобриха с нежным выражением, несущая ивовые ветки">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Mama Beaver Brings Supplies</h2>
            <h2 data-lang="es">Mamá Castor Trae Suministros</h2>
            <h2 data-lang="ru">Мама Бобр Приносит Припасы</h2>
            <div data-lang="en" class="active">
                <p>Mama Beaver arrives with fresh willow bark - beaver&#x27;s favorite food! She&#x27;s proud of Baby Beaver&#x27;s hard work and brings snacks to keep everyone energized.</p>
            </div>
            <div data-lang="es">
                <p>¡Mamá Castor llega con corteza de sauce fresca - la comida favorita de los castores! Está orgullosa del trabajo duro de Bebé Castor y trae bocadillos para mantener a todos con energía.</p>
            </div>
            <div data-lang="ru">
                <p>Мама Бобр приходит со свежей ивовой корой - любимой едой бобров! Она гордится усердной работой Малыша Бобра и приносит закуски, чтобы все оставались полными энергии.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/family-building.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 8: Family Project</h2>
            <h2 data-lang="es">Paso 8: Proyecto Familiar</h2>
            <h2 data-lang="ru">Шаг 8: Семейный проект</h2>
            <div data-lang="en" class="active">
                <p>The whole beaver family works together! Papa Beaver positions logs, Mama Beaver weaves branches, and Baby Beaver packs mud. Beaver families are very close - they work, play, and live together.</p>
            </div>
            <div data-lang="es">
                <p>¡Toda la familia de castores trabaja junta! Papá Castor posiciona troncos, Mamá Castor entrelaza ramas, y Bebé Castor empaca barro. Las familias de castores son muy unidas - trabajan, juegan y viven juntos.</p>
            </div>
            <div data-lang="ru">
                <p>Вся семья бобров работает вместе! Папа Бобр устанавливает бревна, Мама Бобр плетет ветки, а Малыш Бобр утрамбовывает грязь. Семьи бобров очень близки - они работают, играют и живут вместе.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-testing.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 9: Testing the Structure</h2>
            <h2 data-lang="es">Paso 9: Probando la Estructura</h2>
            <h2 data-lang="ru">Шаг 9: Тестирование структуры</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver swims along the dam, feeling for water currents that show leaks. When he finds one, he quickly patches it with more mud and sticks. Quality control is important!</p>
            </div>
            <div data-lang="es">
                <p>Bebé Castor nada a lo largo de la presa, sintiendo las corrientes de agua que muestran fugas. Cuando encuentra una, rápidamente la parchea con más barro y palos. ¡El control de calidad es importante!</p>
            </div>
            <div data-lang="ru">
                <p>Малыш Бобр плавает вдоль плотины, ощущая водные потоки, которые показывают утечки. Когда он находит одну, он быстро залатывает её дополнительной грязью и палками. Контроль качества важен!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-pond-success.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 10: The Pond Forms!</h2>
            <h2 data-lang="es">Paso 10: ¡Se Forma el Estanque!</h2>
            <h2 data-lang="ru">Шаг 10: Формируется пруд!</h2>
            <div data-lang="en" class="active">
                <p>Success! Water is pooling behind the dam, creating a calm pond. This pond will become home to fish, frogs, ducks, and many other animals. Baby Beaver has created a whole ecosystem!</p>
            </div>
            <div data-lang="es">
                <p>¡Éxito! El agua se acumula detrás de la presa, creando un estanque tranquilo. Este estanque se convertirá en hogar para peces, ranas, patos y muchos otros animales. ¡Bebé Castor ha creado todo un ecosistema!</p>
            </div>
            <div data-lang="ru">
                <p>Успех! Вода скапливается за плотиной, создавая спокойный пруд. Этот пруд станет домом для рыб, лягушек, уток и многих других животных. Малыш Бобр создал целую экосистему!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-lodge.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Step 11: Building the Lodge</h2>
            <h2 data-lang="es">Paso 11: Construyendo la Madriguera</h2>
            <h2 data-lang="ru">Шаг 11: Строительство хатки</h2>
            <div data-lang="en" class="active">
                <p>Now Baby Beaver builds a lodge - the beaver home! It&#x27;s like an island house made of sticks and mud, with underwater entrances for safety. The living chamber inside stays dry and cozy.</p>
            </div>
            <div data-lang="es">
                <p>¡Ahora Bebé Castor construye una madriguera - el hogar del castor! Es como una casa isla hecha de palos y barro, con entradas subacuáticas para seguridad. La cámara de vivienda interior se mantiene seca y acogedora.</p>
            </div>
            <div data-lang="ru">
                <p>Теперь Малыш Бобр строит хатку - дом бобра! Это как островной дом из палок и грязи, с подводными входами для безопасности. Жилая камера внутри остаётся сухой и уютной.</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-underwater.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Secret Underwater Door</h2>
            <h2 data-lang="es">Puerta Secreta Submarina</h2>
            <h2 data-lang="ru">Секретная подводная дверь</h2>
            <div data-lang="en" class="active">
                <p>The lodge has a secret - you can only enter from underwater! This keeps the beaver family safe from predators. Baby Beaver dives down and swims up into the dry, warm chamber inside.</p>
            </div>
            <div data-lang="es">
                <p>¡La madriguera tiene un secreto - solo puedes entrar desde debajo del agua! Esto mantiene a la familia de castores a salvo de los depredadores. Bebé Castor se sumerge y nada hacia arriba hacia la cámara seca y cálida del interior.</p>
            </div>
            <div data-lang="ru">
                <p>У хатки есть секрет - войти можно только из-под воды! Это защищает семью бобров от хищников. Малыш Бобр ныряет вниз и всплывает в сухую, тёплую камеру внутри.</p>
            </div>
        </div>
    </section>
    <section class="content-section action-sequence">
        <div class="image-container">
            <img src="assets/images/family-winter-prep.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Preparing for Winter</h2>
            <h2 data-lang="es">Preparándose para el Invierno</h2>
            <h2 data-lang="ru">Подготовка к зиме</h2>
            <div data-lang="en" class="active">
                <p>The beaver family stores branches underwater near their lodge. In winter, when the pond freezes, they&#x27;ll have food without going outside. Beavers are amazing planners!</p>
            </div>
            <div data-lang="es">
                <p>La familia de castores almacena ramas bajo el agua cerca de su madriguera. En invierno, cuando el estanque se congele, tendrán comida sin salir afuera. ¡Los castores son planificadores increíbles!</p>
            </div>
            <div data-lang="ru">
                <p>Семья бобров хранит ветки под водой возле своей хатки. Зимой, когда пруд замёрзнет, у них будет еда без необходимости выходить наружу. Бобры - удивительные планировщики!</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/baby-beaver-celebration.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">Mission Accomplished!</h2>
            <h2 data-lang="es">¡Misión Cumplida!</h2>
            <h2 data-lang="ru">Миссия выполнена!</h2>
            <div data-lang="en" class="active">
                <p>Baby Beaver&#x27;s first dam is complete! He celebrates by slapping his tail on the water - SMACK! This sound can be heard half a mile away. It&#x27;s how beavers say &#x27;We did it!&#x27;</p>
            </div>
            <div data-lang="es">
                <p>¡La primera presa de Bebé Castor está completa! Celebra golpeando su cola en el agua - ¡SMACK! Este sonido se puede escuchar a media milla de distancia. ¡Es como los castores dicen &#x27;Lo logramos&#x27;!</p>
            </div>
            <div data-lang="ru">
                <p>Первая плотина Малыша Бобра готова! Он празднует, хлопая хвостом по воде - ШЛЕП! Этот звук слышно на расстоянии полумили. Так бобры говорят &#x27;Мы сделали это!&#x27;</p>
            </div>
        </div>
    </section>
    <section class="content-section">
        <div class="image-container">
            <img src="assets/images/ecosystem-thriving.jpg" 
                 alt="" 
                 data-alt-en=""
                 data-alt-es=""
                 data-alt-ru="">
        </div>
        <div class="text-content">
            <h2 data-lang="en" class="active">A New Ecosystem</h2>
            <h2 data-lang="es">Un Nuevo Ecosistema</h2>
            <h2 data-lang="ru">Новая экосистема</h2>
            <div data-lang="en" class="active">
                <p>Thanks to Baby Beaver&#x27;s dam, the whole area has transformed! Fish swim in the deep water, birds nest in the wetlands, and deer come to drink. One beaver family has created a home for hundreds of animals!</p>
            </div>
            <div data-lang="es">
                <p>¡Gracias a la presa de Bebé Castor, toda el área se ha transformado! Los peces nadan en el agua profunda, los pájaros anidan en los humedales, y los ciervos vienen a beber. ¡Una familia de castores ha creado un hogar para cientos de animales!</p>
            </div>
            <div data-lang="ru">
                <p>Благодаря плотине Малыша Бобра вся территория преобразилась! Рыбы плавают в глубокой воде, птицы гнездятся на болотах, а олени приходят пить. Одна семья бобров создала дом для сотен животных!</p>
            </div>
        </div>
    </section>

    <!-- Viewer Details Section -->
    <section class="viewer-details">
        <h2 data-lang="en" class="active">Did You Notice?</h2>
        <h2 data-lang="es">¿Te Diste Cuenta?</h2>
        <h2 data-lang="ru">Вы Заметили?</h2>
        <div class="details-grid">
            <div class="detail-card">
                <img src="assets/images/detail-beaver-tail.jpg" alt="The Beaver&#x27;s Tail">
                <div class="detail-content">
                    <h3 data-lang="en" class="active">The Beaver&#x27;s Tail</h3>
                    <h3 data-lang="es">La Cola del Castor</h3>
                    <h3 data-lang="ru">Хвост Бобра</h3>
                    <p data-lang="en" class="active">Did you notice how Baby Beaver uses his flat tail? It serves as a rudder for swimming, a prop when sitting upright, and makes a loud warning slap on water to alert family of danger!</p>
                    <p data-lang="es">¿Notaste cómo Bebé Castor usa su cola plana? Sirve como timón para nadar, como apoyo cuando se sienta erguido, ¡y hace un fuerte golpe de advertencia en el agua para alertar a la familia del peligro!</p>
                    <p data-lang="ru">Вы заметили, как Малыш Бобр использует свой плоский хвост? Он служит рулем при плавании, опорой при сидении и издает громкий предупреждающий шлепок по воде, чтобы предупредить семью об опасности!</p>
                </div>
            </div>
            <div class="detail-card">
                <img src="assets/images/detail-underwater-entrance.jpg" alt="Underwater Entrances">
                <div class="detail-content">
                    <h3 data-lang="en" class="active">Underwater Entrances</h3>
                    <h3 data-lang="es">Entradas Subacuáticas</h3>
                    <h3 data-lang="ru">Подводные Входы</h3>
                    <p data-lang="en" class="active">Look closely at the lodge - all entrances are underwater! This clever design keeps predators out while allowing beavers to come and go safely, even when the pond freezes over.</p>
                    <p data-lang="es">¡Mira de cerca la madriguera - todas las entradas están bajo el agua! Este diseño inteligente mantiene a los depredadores fuera mientras permite a los castores entrar y salir con seguridad, incluso cuando el estanque se congela.</p>
                    <p data-lang="ru">Посмотрите внимательно на хатку - все входы находятся под водой! Эта умная конструкция не пускает хищников, позволяя бобрам безопасно входить и выходить, даже когда пруд замерзает.</p>
                </div>
            </div>
            <div class="detail-card">
                <img src="assets/images/detail-orange-teeth.jpg" alt="Those Orange Teeth...">
                <div class="detail-content">
                    <h3 data-lang="en" class="active">Those Orange Teeth...</h3>
                    <h3 data-lang="es">Esos Dientes Naranjas...</h3>
                    <h3 data-lang="ru">Эти Оранжевые Зубы...</h3>
                    <p data-lang="en" class="active">Did you see Baby Beaver&#x27;s bright orange teeth? That unusual color isn&#x27;t from eating carrots - it&#x27;s nature&#x27;s special design! The orange comes from a special coating that makes them super strong.</p>
                    <p data-lang="es">¿Viste los brillantes dientes naranjas de Bebé Castor? Ese color inusual no es por comer zanahorias - ¡es un diseño especial de la naturaleza! El naranja viene de un recubrimiento especial que los hace súper fuertes.</p>
                    <p data-lang="ru">Видели яркие оранжевые зубы Малыша Бобра? Этот необычный цвет не от моркови - это особый дизайн природы! Оранжевый цвет от специального покрытия, которое делает их супер крепкими.</p>
                </div>
            </div>
            <div class="detail-card">
                <img src="assets/images/detail-dam-curve.jpg" alt="Engineering Mathematics">
                <div class="detail-content">
                    <h3 data-lang="en" class="active">Engineering Mathematics</h3>
                    <h3 data-lang="es">Matemáticas de Ingeniería</h3>
                    <h3 data-lang="ru">Инженерная Математика</h3>
                    <p data-lang="en" class="active">Notice how the dam curves upstream? This arch shape distributes water pressure evenly, using the same principle as human-built arch dams. Beavers are natural engineers!</p>
                    <p data-lang="es">¿Notas cómo la presa se curva río arriba? Esta forma de arco distribuye la presión del agua uniformemente, usando el mismo principio que las presas de arco construidas por humanos. ¡Los castores son ingenieros naturales!</p>
                    <p data-lang="ru">Заметили, как плотина изгибается вверх по течению? Эта арочная форма равномерно распределяет давление воды, используя тот же принцип, что и арочные плотины, построенные людьми. Бобры - природные инженеры!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Fun Facts Section -->
    <section class="fun-facts-section">
        <div class="fun-facts-container">
            <h2 data-lang="en" class="active">Amazing Beaver Facts!</h2>
            <h2 data-lang="es">¡Datos Asombrosos sobre Castores!</h2>
            <h2 data-lang="ru">Удивительные факты о бобрах!</h2>
            <div class="facts-grid">
                <div class="fact-card">
                    <img src="assets/images/fun-fact-teeth.jpg" alt="...Because of Iron!" class="fact-card-image">
                    <div class="fact-card-content">
                        <h3 data-lang="en" class="active">...Because of Iron!</h3>
                        <h3 data-lang="es">...¡Por el Hierro!</h3>
                        <h3 data-lang="ru">...Из-за Железа!</h3>
                        <p data-lang="en" class="active">The secret behind those orange teeth? Iron! Beaver teeth contain actual iron in their enamel, making them harder than steel knives. They never stop growing and self-sharpen as they gnaw!</p>
                        <p data-lang="es">¿El secreto detrás de esos dientes naranjas? ¡Hierro! Los dientes de castor contienen hierro real en su esmalte, haciéndolos más duros que cuchillos de acero. ¡Nunca dejan de crecer y se afilan solos al roer!</p>
                        <p data-lang="ru">Секрет оранжевых зубов? Железо! Зубы бобров содержат настоящее железо в эмали, делая их твёрже стальных ножей. Они никогда не перестают расти и самозатачиваются при грызении!</p>
                    </div>
                </div>
                <div class="fact-card">
                    <img src="assets/images/fun-fact-dam-size.jpg" alt="Master Builders" class="fact-card-image">
                    <div class="fact-card-content">
                        <h3 data-lang="en" class="active">Master Builders</h3>
                        <h3 data-lang="es">Constructores Maestros</h3>
                        <h3 data-lang="ru">Мастера-строители</h3>
                        <p data-lang="en" class="active">The largest beaver dam ever found is in Canada - it&#x27;s 2,790 feet long and visible from space!</p>
                        <p data-lang="es">¡La presa de castor más grande jamás encontrada está en Canadá - mide 850 metros de largo y es visible desde el espacio!</p>
                        <p data-lang="ru">Самая большая бобровая плотина находится в Канаде - она длиной 850 метров и видна из космоса!</p>
                    </div>
                </div>
                <div class="fact-card">
                    <img src="assets/images/fun-fact-swimming.jpg" alt="Swimming Champions" class="fact-card-image">
                    <div class="fact-card-content">
                        <h3 data-lang="en" class="active">Swimming Champions</h3>
                        <h3 data-lang="es">Campeones de Natación</h3>
                        <h3 data-lang="ru">Чемпионы по плаванию</h3>
                        <p data-lang="en" class="active">Beavers can hold their breath underwater for up to 15 minutes and swim at speeds of 5 mph!</p>
                        <p data-lang="es">¡Los castores pueden contener la respiración bajo el agua hasta 15 minutos y nadar a velocidades de 8 km/h!</p>
                        <p data-lang="ru">Бобры могут задерживать дыхание под водой до 15 минут и плавать со скоростью 8 км/ч!</p>
                    </div>
                </div>
                <div class="fact-card">
                    <img src="assets/images/fun-fact-nocturnal.jpg" alt="Night Workers" class="fact-card-image">
                    <div class="fact-card-content">
                        <h3 data-lang="en" class="active">Night Workers</h3>
                        <h3 data-lang="es">Trabajadores Nocturnos</h3>
                        <h3 data-lang="ru">Ночные работники</h3>
                        <p data-lang="en" class="active">Beavers are nocturnal, doing most of their building and foraging work at night when it&#x27;s safer from predators.</p>
                        <p data-lang="es">Los castores son nocturnos, haciendo la mayor parte de su construcción y búsqueda de alimento por la noche cuando es más seguro de los depredadores.</p>
                        <p data-lang="ru">Бобры ведут ночной образ жизни, выполняя большую часть строительства и поиска пищи ночью, когда безопаснее от хищников.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p data-lang="en" class="active">© 2025 Learning with Anastasia - Educational Magazine Collection</p>
        <p data-lang="es">© 2025 Aprendiendo con Anastasia - Colección de Revistas Educativas</p>
        <p data-lang="ru">© 2025 Учимся с Анастасией - Коллекция образовательных журналов</p>
        <p data-lang="en" class="active" style="margin-top: 10px;">Teaching nature&#x27;s engineering through storytelling</p>
        <p data-lang="es" style="margin-top: 10px;">Enseñando la ingeniería de la naturaleza a través de cuentos</p>
        <p data-lang="ru" style="margin-top: 10px;">Обучение природной инженерии через рассказы</p>
    </footer>

    <script>
        // Virtual rendering for performance and language switching
        class VirtualRenderer {
            constructor() {
                this.sections = [];
                this.visibleRange = { start: 0, end: 0 };
                this.buffer = 2; // Render 2 sections above and below viewport
                this.initialize();
            }
            
            initialize() {
                // Get all content sections
                this.sections = Array.from(document.querySelectorAll('.content-section'));
                
                // Store original HTML for each section
                this.sections.forEach((section, index) => {
                    section.dataset.sectionIndex = index;
                    section.dataset.originalHtml = section.innerHTML;
                });
                
                // Initial render
                this.updateVisibleSections();
                
                // Set up scroll listener with debouncing
                let scrollTimeout;
                window.addEventListener('scroll', () => {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => this.updateVisibleSections(), 50);
                });
            }
            
            updateVisibleSections() {
                const viewportTop = window.scrollY - 500;
                const viewportBottom = window.scrollY + window.innerHeight + 500;
                
                let newStart = -1;
                let newEnd = -1;
                
                // Find visible sections
                this.sections.forEach((section, index) => {
                    const rect = section.getBoundingClientRect();
                    const sectionTop = rect.top + window.scrollY;
                    const sectionBottom = sectionTop + rect.height;
                    
                    if (sectionBottom >= viewportTop && sectionTop <= viewportBottom) {
                        if (newStart === -1) newStart = index;
                        newEnd = index;
                    }
                });
                
                // Add buffer
                newStart = Math.max(0, newStart - this.buffer);
                newEnd = Math.min(this.sections.length - 1, newEnd + this.buffer);
                
                // Only update if range changed
                if (newStart !== this.visibleRange.start || newEnd !== this.visibleRange.end) {
                    this.renderRange(newStart, newEnd);
                    this.visibleRange = { start: newStart, end: newEnd };
                }
            }
            
            renderRange(start, end) {
                this.sections.forEach((section, index) => {
                    if (index >= start && index <= end) {
                        // Render section if not already rendered
                        if (section.dataset.rendered !== 'true') {
                            section.innerHTML = section.dataset.originalHtml;
                            section.dataset.rendered = 'true';
                            // Re-apply language setting
                            const currentLang = localStorage.getItem('preferredLanguage') || 'en';
                            this.applyLanguageToSection(section, currentLang);
                        }
                    } else {
                        // Unrender section but keep placeholder
                        if (section.dataset.rendered === 'true') {
                            const height = section.offsetHeight;
                            section.innerHTML = `<div style="height: ${height}px; background: transparent;"></div>`;
                            section.dataset.rendered = 'false';
                        }
                    }
                });
            }
            
            applyLanguageToSection(section, lang) {
                // Hide all language elements in this section
                section.querySelectorAll('[data-lang]').forEach(el => {
                    el.classList.remove('active');
                });
                
                // Show selected language elements
                section.querySelectorAll(`[data-lang="${lang}"]`).forEach(el => {
                    el.classList.add('active');
                });
                
                // Update image alt texts
                section.querySelectorAll('img[data-alt-' + lang + ']').forEach(img => {
                    img.alt = img.getAttribute('data-alt-' + lang);
                });
            }
            
            refreshLanguage(lang) {
                // Only update rendered sections
                this.sections.forEach((section, index) => {
                    if (section.dataset.rendered === 'true') {
                        this.applyLanguageToSection(section, lang);
                    }
                });
            }
        }
        
        let virtualRenderer = null;
        // Language switching functionality
        function changeLanguage(lang) {
            // Find the most visible section before switching
            const sections = document.querySelectorAll('.content-section');
            let mostVisibleSection = null;
            let maxVisibility = 0;
            
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                const viewportHeight = window.innerHeight;
                
                // Calculate how much of the section is visible
                const visibleTop = Math.max(0, Math.min(rect.bottom, viewportHeight));
                const visibleBottom = Math.max(0, rect.top);
                const visibleHeight = visibleTop - visibleBottom;
                
                if (visibleHeight > maxVisibility && rect.top < viewportHeight / 2) {
                    maxVisibility = visibleHeight;
                    mostVisibleSection = section;
                }
            });
            
            // If a section is partially visible at the top, scroll it fully into view
            if (mostVisibleSection) {
                const rect = mostVisibleSection.getBoundingClientRect();
                if (rect.top < 100 && rect.top > -50) {
                    mostVisibleSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    // Wait for scroll to complete
                    setTimeout(() => performLanguageSwitch(lang), 300);
                    return;
                }
            }
            
            performLanguageSwitch(lang);
        }
        
        function performLanguageSwitch(lang) {
            // Save current scroll position
            const scrollPos = window.scrollY;
            
            // Update button states
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                }
            });
            
            // Update non-section language elements (header, footer, etc)
            document.querySelectorAll('.header [data-lang], .footer [data-lang], .fun-facts-section [data-lang], .viewer-details [data-lang]').forEach(el => {
                el.classList.remove('active');
            });
            document.querySelectorAll(`.header [data-lang="${lang}"], .footer [data-lang="${lang}"], .fun-facts-section [data-lang="${lang}"], .viewer-details [data-lang="${lang}"]`).forEach(el => {
                el.classList.add('active');
            });
            
            // Use virtual renderer for content sections
            if (virtualRenderer) {
                virtualRenderer.refreshLanguage(lang);
            } else {
                // Fallback for non-virtual rendering
                document.querySelectorAll('[data-lang]').forEach(el => {
                    el.classList.remove('active');
                });
                document.querySelectorAll(`[data-lang="${lang}"]`).forEach(el => {
                    el.classList.add('active');
                });
                document.querySelectorAll('img[data-alt-' + lang + ']').forEach(img => {
                    img.alt = img.getAttribute('data-alt-' + lang);
                });
            }
            
            // Restore scroll position
            window.scrollTo(0, scrollPos);
            
            // Save preference
            localStorage.setItem('preferredLanguage', lang);
        }

        // Load saved language preference
        window.addEventListener('DOMContentLoaded', () => {
            // Initialize virtual renderer
            virtualRenderer = new VirtualRenderer();
            
            const savedLang = localStorage.getItem('preferredLanguage') || 'en';
            changeLanguage(savedLang);
            
            // Add click handlers to language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    changeLanguage(this.getAttribute('data-lang'));
                });
            });
        });

        // Smooth scroll for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</div>
</body>
</html>